<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kamal - Garden Decor Advisor</title>
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <h1>ðŸŒ¿ Bienvenue dans Kamal - Garden Decor Advisor ðŸŒ¿</h1>
    <p>Transformez votre jardin avec des idÃ©es de dÃ©coration personnalisÃ©es !</p>

    <button id="start-camera">ðŸ“· Activer la CamÃ©ra</button>
    <button id="take-photo" style="display:none;">ðŸ“¸ Prendre une Photo</button>

    <video id="video" width="320" height="240" autoplay style="display:none;"></video>
    <canvas id="canvas" width="320" height="240" style="display:none;"></canvas>

    <div id="photo-result" style="margin-top: 20px;"></div>

    <script>
    // RÃ©cupÃ©rer les Ã©lÃ©ments
    const video = document.getElementById('video');
    const canvas = document.getElementById('canvas');
    const startCameraButton = document.getElementById('start-camera');
    const takePhotoButton = document.getElementById('take-photo');
    const photoResult = document.getElementById('photo-result');

    // Activer la camÃ©ra
    startCameraButton.addEventListener('click', async function() {
        try {
            const stream = await navigator.mediaDevices.getUserMedia({ video: true });
            video.srcObject = stream;
            video.style.display = 'block';
            takePhotoButton.style.display = 'inline-block';
        } catch (error) {
            alert('Erreur d\'accÃ¨s Ã  la camÃ©ra : ' + error.message);
        }
    });

    // Prendre la photo avec fond dÃ©coratif
    takePhotoButton.addEventListener('click', function() {
        const context = canvas.getContext('2d');
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        context.drawImage(video, 0, 0, canvas.width, canvas.height);

        // ArrÃªter la camÃ©ra
        let tracks = video.srcObject.getTracks();
        tracks.forEach(track => track.stop());
        video.style.display = 'none';
        takePhotoButton.style.display = 'none';

        // Afficher la photo avec fond dÃ©coratif
        const container = document.createElement('div');
        container.style.position = 'relative';
        container.style.display = 'inline-block';

        const img = document.createElement('img');
        img.src = canvas.toDataURL('image/png');
        img.alt = 'Photo prise';
        img.style.display = 'block';
        img.style.border = '5px solid #6ab04c';

        const deco1 = document.createElement('img');
        deco1.src = 'decorations/papillon1.png';
        deco1.style.position = 'absolute';
        deco1.style.top = '10px';
        deco1.style.left = '10px';
        deco1.style.width = '50px';

        const deco2 = document.createElement('img');
        deco2.src = 'decorations/fleur1.png';
        deco2.style.position = 'absolute';
        deco2.style.bottom = '10px';
        deco2.style.right = '10px';
        deco2.style.width = '60px';

        const text = document.createElement('img');
        text.src = 'decorations/monjardin.png';
        text.style.position = 'absolute';
        text.style.bottom = '10px';
        text.style.left = '10px';
        text.style.width = '120px';

        container.appendChild(img);
        container.appendChild(deco1);
        container.appendChild(deco2);
        container.appendChild(text);

        photoResult.innerHTML = '';
        photoResult.appendChild(container);
    });
    </script>

</body>
</html>
