<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Garden Decor Advisor</title>
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <h1>ðŸŒ¿ Bienvenue dans Garden Decor Advisor ðŸŒ¿</h1>
    <p>Transformez votre jardin avec des idÃ©es de dÃ©coration personnalisÃ©es !</p>

    <button id="start-camera">ðŸ“· Activer la CamÃ©ra</button>
    <button id="take-photo" style="display:none;">ðŸ“¸ Prendre une Photo</button>

    <video id="video" width="320" height="240" autoplay style="display:none;"></video>
    <canvas id="canvas" width="320" height="240" style="display:none;"></canvas>

    <div id="photo-result" style="margin-top: 20px;"></div>

    <!-- Section pour les dÃ©corations -->
    <div id="decorations" style="margin-top: 20px; text-align: center;">
        <h3>Ajoutez des dÃ©corations :</h3>
        <button onclick="addDecoration('papillon1.png')">ðŸ › Papillon 1</button>
        <button onclick="addDecoration('papillon2.png')">ðŸ › Papillon 2</button>
        <button onclick="addDecoration('fleur1.png')">ðŸŒ¸ Fleur 1</button>
        <button onclick="addDecoration('fleur2.png')">ðŸŒº Fleur 2</button>
        <button onclick="addText('Mon Jardin')">ðŸŒ¿ Ajouter "Mon Jardin"</button>
        <button onclick="addText('Nature')">ðŸŒ¿ Ajouter "Nature"</button>
    </div>

    <script>
    // RÃ©cupÃ©rer les Ã©lÃ©ments
    const video = document.getElementById('video');
    const canvas = document.getElementById('canvas');
    const startCameraButton = document.getElementById('start-camera');
    const takePhotoButton = document.getElementById('take-photo');
    const photoResult = document.getElementById('photo-result');

    // Activer la camÃ©ra
    startCameraButton.addEventListener('click', async function() {
        try {
            const stream = await navigator.mediaDevices.getUserMedia({ video: true });
            video.srcObject = stream;
            video.style.display = 'block';
            takePhotoButton.style.display = 'inline-block';
        } catch (error) {
            alert('Erreur d\'accÃ¨s Ã  la camÃ©ra : ' + error.message);
        }
    });

    // Prendre la photo
    takePhotoButton.addEventListener('click', function() {
        const context = canvas.getContext('2d');
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        context.drawImage(video, 0, 0, canvas.width, canvas.height);
        
        // ArrÃªter la camÃ©ra
        let tracks = video.srcObject.getTracks();
        tracks.forEach(track => track.stop());
        video.style.display = 'none';
        takePhotoButton.style.display = 'none';
        
        // Afficher la photo
        const img = document.createElement('img');
        img.src = canvas.toDataURL('image/png');
        img.alt = 'Photo prise';
        photoResult.innerHTML = '';
        photoResult.appendChild(img);
    });

    // Fonction pour ajouter une image de dÃ©coration
    function addDecoration(imageName) {
        const img = document.createElement('img');
        img.src = 'decorations/' + imageName;
        img.className = 'decor';
        img.style.position = 'absolute';
        img.style.top = '100px';
        img.style.left = '100px';
        img.style.width = '80px';
        img.draggable = true;
        makeDraggable(img);
        document.body.appendChild(img);
    }

    // Fonction pour ajouter du texte
    function addText(textContent) {
        const text = document.createElement('div');
        text.className = 'decor-text';
        text.innerText = textContent;
        text.style.position = 'absolute';
        text.style.top = '150px';
        text.style.left = '150px';
        text.style.fontSize = '24px';
        text.style.color = 'green';
        text.style.fontWeight = 'bold';
        text.draggable = true;
        makeDraggable(text);
        document.body.appendChild(text);
    }

    // Rendre les dÃ©corations dÃ©plaÃ§ables
    function makeDraggable(element) {
        let offsetX, offsetY;

        element.addEventListener('dragstart', function(e) {
            offsetX = e.offsetX;
            offsetY = e.offsetY;
        });

        document.body.addEventListener('dragover', function(e) {
            e.preventDefault();
        });

        document.body.addEventListener('drop', function(e) {
            e.preventDefault();
            element.style.left = (e.pageX - offsetX) + 'px';
            element.style.top = (e.pageY - offsetY) + 'px';
        });
    }
    </script>

</body>
</html>
